# 파일과 파일시스템

- 사용자(어플리케이션)이 직접 하드디스크에 파일을 저장하게 되면 중요한 정보가 훼손될 수 있음
- 따라서 운영체제를 통해 요청하게 되면 운영체제가 안전하게 데이터를 저장해줌.
- 파일관리자는 파일테이블을 통해 데이터를 관리
- 저장장치의 데이터 전송단위는 블록이지만 사용자는 바이트 단위로 접근해야 하는데, 파일관리자가 중간에서 변환해 줌.

### 파일시스템의 기능
1. 파일과 디렉토리 생성
2. 파일과 디렉토리의 수정, 삭제
3. 파일 권한 관리: 다중사용자 기능에서 파일 보호를 위해 필수적인 기능
4. 무결성 보장: 파일의 내용이 손상되지 않도록 보호
5. 백업과 복구
6. 암호화

### 파일의 구조
1. 헤더: 파일의 속성들이 담겨있음.
    - 파일 이름, 식별자, 유형, 크기, 시간, 저장위치, 접근권한, 소유자 등
2. 데이터
    - 데이터를 어떻게 구성하느냐에 따라 종류를 나눌 수 있음.
      - 1. 순차파일구조
        - 모든데이터가 순서대로 기록되기 때문에 공간의 낭비가 없고 구조가 단순
        - 특정 위치로의 탐색이 어려워 데이터 수정과 삭제 시 시간이 오래걸림.
      - 2. 직접파일구조
        - 해시함수를 통해 저장위치를 결정하는 방식
        - 해시테이블 자료구조, Json
        - 해시함수를 이용하기 때문에 데이터 접근이 빠름
        - 해시함수의 선정이 굉장히 중요, 저장공간이 낭비될 수 있음
      - 3. 인덱스파일구조
        - 순차파일구조와 직접파일구조의 장점을 취한 것
        - 인덱스테이블로 인덱스를 저장하여 순차파일구조로 접근
        - ex) 재생목록과 비슷한 구조
        
### File Descriptor
- 운영체제가 파일 관리를 위해 정보를 보관하는 File control block
- 파일마다 독립적으로 존재
- 저장장치에 존재하다 파일이 열리면 메모리로 이동
- 파일 시스템이 관리하고 사용자가 직접 참조 불가
- 사용자는 운영체제가 전달해주는 file descriptor를 통해 파일 참조 가능 