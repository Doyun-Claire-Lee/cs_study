# 디맨드 페이징(가져오기 정책)

> 프로세스가 실행될 때 코드, 데이터, 힙, 스택영역이 모두 메모리에 올라가는 것이 아니라,  
> 각 영역에서 필요한 일부만 메모리에 올라가게 됨  
> -> 이것이 어떻게 가능한가?

### 지역성 이론
- 컴퓨터과학자 도널드 커누스가 발견한 90:10 이론
- 프로그램이 실행될 때 90%의 시간이 10%의 코드에서 소모되는 것을 의미

1. 공간의 지역성 
    - 현재 위치와 가까운 데이터에 접근할 확률이 높음
2. 시간의 지역성
    - 최근에 접근했던 데이터가 오래전에 접근했던 데이터보다 접근할 확률이 높음
   
### 디맨드 페이징 
- 지역성 이론에 따라 조만간 쓰일 것 같은 데이터만 메모리에 올리고 사용하지 않는 데이터는 스왑영역으로 보내 성능을 향상시키는 정책
- ex) 포토샵의 외부 필터들 -> 사용자의 요청이 있을때만 메모리에 올림

### 메모리 계층구조
1. 레지스터: CPU 1사이클로 굉장히 빠름
2. 캐시(L1, L2): CPU n~nn사이클
3. 메인메모리: CPU nnn 사이클
4. 보조저장장치: CPU 수백만 사이클

### 페이지 테이블 엔트리(PTE)
- 페이지테이블의 한 행을 의미
- 구성요소
  - 1. 접근비트: 페이지가 메모리에 올라간 후 접근 여부를 표시(접근이 있었다면 1로 변경)
  - 2. 변경비트: 페이지가 메모리에 올라간 후 데이터의 변경 여부를 표시(쓰기 작업을 했다면 1로 변경)
  - 3. 유효비트: 페이지가 물리메모리에 있는지의 여부를 표시(0이라면 물리메모리, 1이라면 스왑영역)
  - 4. 읽기/쓰기/실행비트: 권한비트, 해당 메모리에 접근 권한이 있는지 검사하는 비트
